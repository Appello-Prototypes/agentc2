---
title: "Multi-Tenancy"
description: "AgentC2's multi-tenant architecture: organizations, workspaces, tenant isolation, membership roles, and cross-workspace boundaries."
section: "platform"
order: 1
primaryKeyword: "multi-tenant AI platform"
relatedSlugs: ["platform/authentication", "platform/security", "platform/federation", "agents/overview"]
pageType: "concept"
ctaLabel: "Launch AgentC2 Workspace"
ctaHref: "/workspace"
---

# Multi-Tenancy

AgentC2 is built as a multi-tenant platform where organizations own workspaces, workspaces contain agents and resources, and membership controls access with role-based permissions. Tenant isolation ensures data privacy, security boundaries, and resource quotas across all platform operations.

## Architecture overview

The multi-tenant model follows a hierarchical structure:

```
Organization (tenant boundary)
  ├── Workspace (environment isolation)
  │     ├── Agents
  │     ├── Workflows
  │     ├── Networks
  │     ├── Documents
  │     └── Integrations
  └── Membership (user access control)
```

### Organization model

Organizations are the top-level tenant boundary. Each organization:

- **Owns resources** — All agents, workspaces, documents, and integrations belong to an organization
- **Enforces quotas** — Limits on agents, workspaces, runs per month, seats, and storage
- **Manages billing** — Stripe customer ID for subscription management
- **Tracks lifecycle** — Status (active, trial, suspended, past_due), trial expiration, suspension reasons

```bash
# Create an organization
curl -X POST https://agentc2.ai/agent/api/organizations \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Acme Corporation",
    "slug": "acme-corp",
    "description": "Enterprise AI automation"
  }'
```

### Workspace model

Workspaces provide environment isolation within an organization. Each workspace:

- **Isolates resources** — Agents, workflows, and documents are scoped to a workspace
- **Supports environments** — `development`, `staging`, `production` environments
- **Has a default** — One workspace per organization marked as `isDefault`
- **Maintains metadata** — Custom JSON metadata for workspace-specific configuration

```bash
# Create a workspace
curl -X POST https://agentc2.ai/agent/api/workspaces \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "organizationId": "org_123",
    "name": "Production",
    "slug": "prod",
    "environment": "production"
  }'
```

<Callout type="info">
    **Workspace vs Organization**: Use **organizations** for tenant boundaries (billing, quotas, isolation). Use **workspaces** for environment separation (dev/staging/prod) within a single organization.
</Callout>

## Tenant isolation boundaries

All platform operations enforce tenant isolation at the database level:

### Data isolation

| Resource Type | Isolation Boundary | Query Pattern |
| ------------- | ------------------ | ------------ |
| **Agents** | `workspaceId` → `organizationId` | Filter by workspace, verify org membership |
| **Documents** | `workspaceId` → `organizationId` | RAG queries scoped to workspace |
| **Runs** | `agentId` → `workspaceId` → `organizationId` | Traces isolated per tenant |
| **Integrations** | `organizationId` | OAuth tokens encrypted per org |
| **Schedules** | `workspaceId` → `organizationId` | Cron jobs scoped to workspace |

### API-level enforcement

Every API request validates tenant boundaries:

```typescript
// Example: Agent resolution with tenant check
const agent = await prisma.agent.findFirst({
  where: {
    id: agentId,
    workspace: {
      organizationId: userOrganizationId // Enforced by auth middleware
    }
  }
})
```

### Cross-workspace assumptions

While workspaces provide isolation, some resources can be shared:

- **Skills** — Can be attached to agents across workspaces (within same org)
- **Tool Credentials** — Organization-level MCP credentials shared across workspaces
- **Integrations** — OAuth connections scoped to organization, usable in any workspace

<Callout type="warning">
    **Never assume cross-tenant access**: Always verify `organizationId` matches the authenticated user's organization. Database queries should include tenant filters to prevent data leakage.
</Callout>

## Membership and roles

The `Membership` model controls user access to organizations:

### Role hierarchy

| Role | Permissions | Use Case |
| ---- | ----------- | -------- |
| **owner** | Full control, billing, deletion | Organization creator |
| **admin** | Manage members, workspaces, agents | Team leads, technical admins |
| **member** | Create/edit agents, run workflows | Regular users |
| **viewer** | Read-only access | Auditors, stakeholders |

### Granular permissions

Beyond roles, `permissions` array supports fine-grained access:

```json
{
  "role": "member",
  "permissions": [
    "guardrail_override",
    "budget_override",
    "integration_manage"
  ]
}
```

### Membership lifecycle

```bash
# Invite a user to an organization
curl -X POST https://agentc2.ai/agent/api/organizations/acme-corp/members \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "email": "user@example.com",
    "role": "member",
    "permissions": []
  }'

# Update membership role
curl -X PATCH https://agentc2.ai/agent/api/memberships/mem_123 \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "role": "admin"
  }'
```

## Admin control surfaces

Platform administrators can manage organizations via admin APIs:

### Organization management

- **Suspend organizations** — Set `status: "suspended"` with reason
- **Adjust quotas** — Override `maxAgents`, `maxWorkspaces`, `maxRunsPerMonth`
- **Monitor health** — Track `riskScore`, `lastHealthCheck`
- **Billing control** — Link Stripe customer, manage subscriptions

### Workspace management

- **Create workspaces** — Provision new environments
- **Set defaults** — Mark workspace as `isDefault`
- **Environment control** — Enforce environment naming conventions

### Membership management

- **Invite users** — Generate invite codes with expiration
- **Domain-based join** — Auto-join via `OrganizationDomain` mapping
- **Role assignment** — Assign roles and granular permissions

## Database schema reference

### Organization fields

| Field | Type | Description |
| ----- | ---- | ----------- |
| `id` | string | CUID identifier |
| `slug` | string | URL-safe identifier (unique) |
| `name` | string | Display name |
| `status` | string | `"active"`, `"trial"`, `"suspended"`, `"past_due"`, `"deactivated"` |
| `maxAgents` | int? | Agent quota limit |
| `maxWorkspaces` | int? | Workspace quota limit |
| `maxRunsPerMonth` | int? | Monthly run quota |
| `maxSeats` | int? | User seat limit |
| `maxStorageBytes` | bigint? | File storage quota |
| `stripeCustomerId` | string? | Stripe customer ID |

### Workspace fields

| Field | Type | Description |
| ----- | ---- | ----------- |
| `id` | string | CUID identifier |
| `organizationId` | string | Parent organization |
| `slug` | string | URL-safe identifier (within org) |
| `name` | string | Display name |
| `environment` | string | `"development"`, `"staging"`, `"production"` |
| `isDefault` | boolean | Default workspace flag |

### Membership fields

| Field | Type | Description |
| ----- | ---- | ----------- |
| `id` | string | CUID identifier |
| `userId` | string | User ID (from Better Auth) |
| `organizationId` | string | Organization ID |
| `role` | string | `"owner"`, `"admin"`, `"member"`, `"viewer"` |
| `permissions` | string[] | Granular permission array |

## Best practices

1. **Use workspaces for environments** — Separate dev/staging/prod into different workspaces
2. **Enforce quotas** — Set `maxAgents`, `maxRunsPerMonth` to prevent runaway usage
3. **Role-based access** — Assign minimal permissions; use `viewer` for read-only access
4. **Monitor health** — Track `riskScore` and `lastHealthCheck` for tenant health
5. **Soft delete** — Use `deletedAt` for soft deletion, preserve audit trails

## Related topics

- **[Authentication](/docs/platform/authentication)** — How user sessions map to organizations
- **[Security](/docs/platform/security)** — Tenant isolation and credential encryption
- **[Federation](/docs/platform/federation)** — Cross-organization trust boundaries
- **[Agents Overview](/docs/agents/overview)** — How agents are scoped to workspaces
