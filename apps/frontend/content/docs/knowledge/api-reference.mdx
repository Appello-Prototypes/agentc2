---
title: "Knowledge API Reference"
description: "Complete API reference for RAG and document endpoints: ingestion, query, search, document CRUD, versioning, and re-embedding."
section: "knowledge"
order: 5
primaryKeyword: "knowledge API reference"
relatedSlugs: ["knowledge/overview", "knowledge/document-ingestion", "knowledge/vector-search"]
secondaryKeywords:
    ["RAG API", "document API", "knowledge API", "RAG endpoints", "document endpoints"]
pageType: "reference"
ctaLabel: "Launch AgentC2 Workspace"
ctaHref: "/workspace"
---

# Knowledge API Reference

Complete reference for all knowledge/RAG and document-related API endpoints. All endpoints are prefixed with `/agent/api` and require authentication via Bearer token or session cookie.

## Authentication

All endpoints require authentication. Use one of these methods:

- **Bearer token**: `Authorization: Bearer $TOKEN`
- **Session cookie**: Include session cookie from workspace login

## Document Endpoints

### Create Document

<ApiEndpoint method="POST" path="/agent/api/documents" />

Create a new document with automatic RAG embedding.

#### Request Body

| Field          | Type     | Required | Description                                                        |
| -------------- | -------- | -------- | ------------------------------------------------------------------ |
| `slug`         | string   | ✅ Yes   | URL-safe identifier (unique)                                       |
| `name`         | string   | ✅ Yes   | Display name                                                       |
| `description`  | string   | ❌ No    | Human-readable description                                         |
| `content`      | string   | ✅ Yes   | Document content                                                   |
| `contentType`  | string   | ❌ No    | `"markdown"`, `"text"`, `"html"`, `"json"` (default: `"markdown"`) |
| `category`     | string   | ❌ No    | Document category                                                  |
| `tags`         | string[] | ❌ No    | Array of tags                                                      |
| `metadata`     | object   | ❌ No    | Custom JSON metadata                                               |
| `chunkOptions` | object   | ❌ No    | Chunking configuration                                             |

#### Example Request

```bash
curl -X POST https://agentc2.ai/agent/api/documents \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "slug": "product-docs",
    "name": "Product Documentation",
    "content": "# Product Guide\n\n...",
    "contentType": "markdown",
    "category": "documentation",
    "tags": ["product", "guide"]
  }'
```

#### Response

```json
{
    "id": "doc_abc123",
    "slug": "product-docs",
    "name": "Product Documentation",
    "content": "# Product Guide\n\n...",
    "contentType": "markdown",
    "vectorIds": ["vec_1", "vec_2", "vec_3"],
    "chunkCount": 3,
    "embeddedAt": "2026-02-18T12:00:00.000Z",
    "category": "documentation",
    "tags": ["product", "guide"],
    "version": 1,
    "createdAt": "2026-02-18T12:00:00.000Z"
}
```

### Get Document

<ApiEndpoint method="GET" path="/agent/api/documents/{documentId}" />

Get details for a specific document.

#### Path Parameters

| Parameter    | Type   | Description         |
| ------------ | ------ | ------------------- |
| `documentId` | string | Document slug or ID |

#### Example Request

```bash
curl https://agentc2.ai/agent/api/documents/product-docs \
  -H "Authorization: Bearer $TOKEN"
```

### Update Document

<ApiEndpoint method="PUT" path="/agent/api/documents/{documentId}" />

Update an existing document. Automatically re-embeds if content changes.

#### Path Parameters

| Parameter    | Type   | Description         |
| ------------ | ------ | ------------------- |
| `documentId` | string | Document slug or ID |

#### Request Body

All fields are optional. Only include fields you want to update.

#### Example Request

```bash
curl -X PUT https://agentc2.ai/agent/api/documents/product-docs \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "content": "# Updated Product Guide\n\n...",
    "category": "documentation"
  }'
```

### Delete Document

<ApiEndpoint method="DELETE" path="/agent/api/documents/{documentId}" />

Delete a document and all its vector chunks.

#### Path Parameters

| Parameter    | Type   | Description         |
| ------------ | ------ | ------------------- |
| `documentId` | string | Document slug or ID |

#### Example Request

```bash
curl -X DELETE https://agentc2.ai/agent/api/documents/product-docs \
  -H "Authorization: Bearer $TOKEN"
```

### List Documents

<ApiEndpoint method="GET" path="/agent/api/documents" />

List all documents accessible to the authenticated user.

#### Query Parameters

| Parameter  | Type   | Default | Description                 |
| ---------- | ------ | ------- | --------------------------- |
| `category` | string | —       | Filter by category          |
| `tag`      | string | —       | Filter by tag               |
| `limit`    | number | `50`    | Maximum number of documents |
| `offset`   | number | `0`     | Number of documents to skip |

#### Example Request

```bash
curl "https://agentc2.ai/agent/api/documents?category=documentation&limit=10" \
  -H "Authorization: Bearer $TOKEN"
```

### Upload Document

<ApiEndpoint method="POST" path="/agent/api/documents/upload" />

Upload a file (PDF, images, text files) for ingestion.

#### Request Body

Multipart form data:

| Field      | Type   | Required | Description          |
| ---------- | ------ | -------- | -------------------- |
| `file`     | file   | ✅ Yes   | File to upload       |
| `slug`     | string | ✅ Yes   | Document slug        |
| `name`     | string | ✅ Yes   | Display name         |
| `category` | string | ❌ No    | Document category    |
| `tags`     | string | ❌ No    | Comma-separated tags |

#### Example Request

```bash
curl -X POST https://agentc2.ai/agent/api/documents/upload \
  -H "Authorization: Bearer $TOKEN" \
  -F "file=@document.pdf" \
  -F "slug=product-docs" \
  -F "name=Product Documentation" \
  -F "category=documentation"
```

### Re-embed Document

<ApiEndpoint method="POST" path="/agent/api/documents/{documentId}/reembed" />

Re-embed a document with new chunking strategy.

#### Path Parameters

| Parameter    | Type   | Description         |
| ------------ | ------ | ------------------- |
| `documentId` | string | Document slug or ID |

#### Request Body

| Field          | Type   | Required | Description                |
| -------------- | ------ | -------- | -------------------------- |
| `chunkOptions` | object | ❌ No    | New chunking configuration |

#### Example Request

```bash
curl -X POST https://agentc2.ai/agent/api/documents/product-docs/reembed \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "chunkOptions": {
      "strategy": "semantic",
      "maxChunkSize": 1500
    }
  }'
```

### Get Document Chunks

<ApiEndpoint method="GET" path="/agent/api/documents/{documentId}/chunks" />

Get all vector chunks for a document.

#### Path Parameters

| Parameter    | Type   | Description         |
| ------------ | ------ | ------------------- |
| `documentId` | string | Document slug or ID |

#### Example Request

```bash
curl https://agentc2.ai/agent/api/documents/product-docs/chunks \
  -H "Authorization: Bearer $TOKEN"
```

#### Response

```json
{
    "documentId": "doc_abc123",
    "documentSlug": "product-docs",
    "chunkCount": 3,
    "chunks": [
        {
            "chunkId": "vec_1",
            "content": "To configure the product...",
            "metadata": { "chunkIndex": 0 }
        }
    ]
}
```

## RAG Endpoints

### RAG Query

<ApiEndpoint method="POST" path="/agent/api/rag/query" />

Query the RAG system for relevant document chunks.

#### Request Body

| Field      | Type   | Required | Description                             |
| ---------- | ------ | -------- | --------------------------------------- |
| `query`    | string | ✅ Yes   | Search query                            |
| `topK`     | number | ❌ No    | Number of results (default: 5)          |
| `minScore` | number | ❌ No    | Minimum similarity score (default: 0.7) |
| `filters`  | object | ❌ No    | Metadata filters                        |
| `hybrid`   | object | ❌ No    | Hybrid search configuration             |

#### Example Request

```bash
curl -X POST https://agentc2.ai/agent/api/rag/query \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "query": "How do I configure the product?",
    "topK": 5,
    "minScore": 0.7,
    "filters": {
      "category": "documentation"
    }
  }'
```

#### Response

```json
{
  "success": true,
  "results": [
    {
      "chunkId": "vec_1",
      "documentId": "doc_abc123",
      "documentSlug": "product-docs",
      "documentName": "Product Documentation",
      "content": "To configure the product...",
      "score": 0.92,
      "metadata": {...}
    }
  ],
  "totalResults": 1
}
```

### RAG Generate

<ApiEndpoint method="POST" path="/agent/api/rag/generate" />

Generate a response using RAG context.

#### Request Body

| Field              | Type    | Required | Description                           |
| ------------------ | ------- | -------- | ------------------------------------- |
| `query`            | string  | ✅ Yes   | User query                            |
| `maxResults`       | number  | ❌ No    | Maximum RAG results (default: 5)      |
| `generateResponse` | boolean | ❌ No    | Generate LLM response (default: true) |

#### Example Request

```bash
curl -X POST https://agentc2.ai/agent/api/rag/generate \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "query": "How do I configure the product?",
    "maxResults": 5
  }'
```

#### Response

Streaming Server-Sent Events (SSE) with response:

```
data: {"type":"rag_results","results":[...]}

data: {"type":"text","delta":"To","text":"To"}

data: {"type":"text","delta":" configure","text":"To configure"}

data: {"type":"done"}
```

### RAG Ingest

<ApiEndpoint method="POST" path="/agent/api/rag/ingest" />

Simplified document ingestion for RAG.

#### Request Body

| Field          | Type     | Required | Description                          |
| -------------- | -------- | -------- | ------------------------------------ |
| `content`      | string   | ✅ Yes   | Document content                     |
| `type`         | string   | ❌ No    | Content type (default: `"markdown"`) |
| `sourceId`     | string   | ❌ No    | Source identifier                    |
| `sourceName`   | string   | ❌ No    | Source name                          |
| `description`  | string   | ❌ No    | Description                          |
| `category`     | string   | ❌ No    | Category                             |
| `tags`         | string[] | ❌ No    | Tags                                 |
| `chunkOptions` | object   | ❌ No    | Chunking configuration               |

#### Example Request

```bash
curl -X POST https://agentc2.ai/agent/api/rag/ingest \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "content": "# Product Guide\n\n...",
    "type": "markdown",
    "sourceId": "product-docs",
    "sourceName": "Product Documentation",
    "category": "documentation"
  }'
```

### List RAG Documents

<ApiEndpoint method="GET" path="/agent/api/rag/documents" />

List all documents in the RAG system.

#### Example Request

```bash
curl https://agentc2.ai/agent/api/rag/documents \
  -H "Authorization: Bearer $TOKEN"
```

### Delete RAG Document

<ApiEndpoint method="DELETE" path="/agent/api/rag/documents/{documentId}" />

Delete a document from the RAG system.

#### Path Parameters

| Parameter    | Type   | Description         |
| ------------ | ------ | ------------------- |
| `documentId` | string | Document slug or ID |

#### Example Request

```bash
curl -X DELETE https://agentc2.ai/agent/api/rag/documents/product-docs \
  -H "Authorization: Bearer $TOKEN"
```

## Document Version Endpoints

### List Document Versions

<ApiEndpoint method="GET" path="/agent/api/documents/{documentId}/versions" />

List all versions for a document.

#### Path Parameters

| Parameter    | Type   | Description         |
| ------------ | ------ | ------------------- |
| `documentId` | string | Document slug or ID |

#### Example Request

```bash
curl https://agentc2.ai/agent/api/documents/product-docs/versions \
  -H "Authorization: Bearer $TOKEN"
```

### Get Document Version

<ApiEndpoint method="GET" path="/agent/api/documents/{documentId}/versions/{version}" />

Get a specific document version.

#### Path Parameters

| Parameter    | Type   | Description         |
| ------------ | ------ | ------------------- |
| `documentId` | string | Document slug or ID |
| `version`    | number | Version number      |

## Error Codes

All endpoints may return these error codes:

| Status | Error Code                | Description                       | Solution                         |
| ------ | ------------------------- | --------------------------------- | -------------------------------- |
| `400`  | `MISSING_REQUIRED_FIELDS` | Missing required fields           | Include all required fields      |
| `400`  | `INVALID_CONTENT_TYPE`    | Invalid content type              | Use supported content types      |
| `401`  | `UNAUTHORIZED`            | Missing or invalid authentication | Include `Authorization` header   |
| `404`  | `NOT_FOUND`               | Document not found                | Check document ID/slug           |
| `409`  | `SLUG_CONFLICT`           | Slug already exists               | Use different slug               |
| `500`  | `EMBEDDING_FAILED`        | Embedding failed                  | Check OpenAI API key             |
| `500`  | `INTERNAL_ERROR`          | Server error                      | Retry request or contact support |

## Rate Limits

API endpoints are rate-limited:

- **Query endpoints**: 60 requests per minute per IP
- **Ingestion endpoints**: 20 requests per minute per user
- **Document CRUD**: 100 requests per minute per user

Rate limit headers are included in responses:

```
X-RateLimit-Limit: 60
X-RateLimit-Remaining: 45
X-RateLimit-Reset: 1642608000
```

## Related Topics

- **[Document Ingestion](/docs/knowledge/document-ingestion)** — Learn how to ingest documents
- **[Vector Search](/docs/knowledge/vector-search)** — Understand semantic search
- **[Hybrid Search](/docs/knowledge/hybrid-search)** — Combine semantic and lexical search
